<div class="container small-form">
    <br>
    <h2>Edit material</h2>
    <form action="/materials/edit/{{material.id}}" method="POST">
        <div class="form-group">
            <label for="exampleFormControlSelect1">Select category</label>
            <select class="form-control" name="category">
                <option selected>{{material.category}}</option>
                {{#each categories}}
                <option value="{{name}}">{{name}}</option>
                {{/each}}
            </select>
        </div>
        <br> <br>
        <div class="form-group">
            <label for="formGroupExampleInput">Description</label>
            <input type="text" class="form-control" id="formGroupExampleInput" placeholder="Material description"
                minlength="1" maxlength="120" name="description" required value={{material.description}}>
        </div>
        <div class="form-group">
            <label for="formGroupExampleInput">Rate</label>
            <input type="number" class="form-control" id="formGroupExampleInput" placeholder="999.99" step="0.01"
                max="999.99" pattern="^\d*(\.\d{0,2})?$" name="rate" value="{{material.rate}}">
        </div>
        <button type="submit" class="btn btn-success">Edit</button>
        <a href="/materials/" class="btn btn-danger">Cancel</a>
    </form>
</div>
<script>
    $(document).on('keydown', 'input[pattern]', function (e) {
        var input = $(this);
        var oldVal = input.val();
        var regex = new RegExp(input.attr('pattern'), 'g');

        setTimeout(function () {
            var newVal = input.val();
            if (!regex.test(newVal)) {
                input.val(oldVal);
            }
        }, 0);
    });
</script>